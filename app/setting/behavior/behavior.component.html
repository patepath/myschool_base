<div class="main-content">
    
    <div class="container-fluid">

        <div id="behavior_frm">

            <div class="card">

                <div class="card-body">

                    <div class="form-group">

                        <div *ngIf="isupdate;else insert_block">

                            <div class="row mb-2">

                                <div class="col-1">
                                    <label>เลขที่กลุ่ม</label>
                                </div>

                                <div class="col-1"> 
                                    {{behavior.GroupNo}}
                                </div>

                            </div>

                            <div class="row mb-2">
                                <div class="col-1">
                                    <label>กลุ่ม</label>
                                </div>

                                <div class="col-4"> 
                                    {{behavior.GroupName}}
                                </div>
                            </div>


                            <div class="row mb-2">
                                <div class="col-1">
                                    <label>ข้อที่</label>
                                </div>

                                <div class="col-4"> 
                                    {{behavior.TopicNo}}
                                </div>
                            </div>

                        </div>

                        <ng-template #insert_block>

                            <div *ngIf="!isnewgroup;else newgroup_block">

                                <div class="row mb-2">
                                    
                                    <div class="col-4">
                                        <label>กลุ่ม</label>
                                        <select class="form-control" [(ngModel)]="group" (change)="changeGroupName()">
                                            <option *ngFor="let opt of groups" [ngValue]="opt" >{{opt.Name}}</option>
                                        </select>
                                        <span style="color: mediumblue; cursor: pointer;" (click)="insertgroup()">เพิ่มกลุ่มใหม่</span>
                                    </div>

                                </div>

                            </div>

                            <ng-template #newgroup_block>

                                <div class="row mb-2">

                                    <div class="col-12">
                                        <label>กลุ่ม</label>
                                        <input type="text" class="form-control" [(ngModel)]="behavior.GroupName"/>
                                        <span style="color: mediumblue; cursor: pointer;" (click)="backtoupdate()">ยกเลิกการเพิ่มกลุ่ม</span>
                                    </div>

                                </div>

                            </ng-template>

                        </ng-template>

                        <div class="row mb-2">

                            <div class="col-12">
                                <label>หัวข้อ</label>
                                <input type="text" class="form-control" [(ngModel)]="behavior.TopicName">
                            </div>

                        </div>

                        <div class="row mb-3">
                            
                            <div class="col-1">
                                <label>หักคะแนน</label>
                                <input type="number" class="form-control" [(ngModel)]="behavior.Point">
                            </div>

                        </div>

                    </div>

                    <div class="row">

                        <div class="col">

                            <button class="btn btn-success" (click)="save()">
                                <span class="fa fa-floppy-o" aria-hidden="true"></span>
                                บันทึก
                            </button>

                            <button class="btn btn-default ml-2" (click)="close()">
                                <span class="fa fa-window-close" aria-hidden="true"></span>
                                ยกเลิก
                            </button>

                        </div>

                        <div class="col align-self-end text-right">

                            <button class="btn btn-danger ml-2" (click)="remove()">
                                <span class="fa fa-close" aria-hidden="true"></span>
                                ลบ
                            </button>

                        </div>

                    </div>

                </div>

            </div>

        </div>

        <div id="behavior_view">

            <div class="card">

                <div class="card-body">

                    <div class="toolbar">
                        <!--        Here you can write extra buttons/actions for the toolbar              -->

                        <div class="row mb-3">

                            <div class="col-auto">
                                <label>กลุ่ม</label>
                                <select class="form-control" [(ngModel)]="group" (change)="search()">
                                    <option *ngFor="let opt of groups" [ngValue]="opt" >{{opt.Name}}</option>
                                </select>
                            </div>

                            <div class="col align-self-end text-right">
                                <button class="btn btn-success" (click)="insert()">
                                    <span class="fa fa-plus" aria-hidden="true"></span> 
                                    เพิ่มข้อมูลหัวข้อพฤติกรรม
                                </button>
                            </div>

                        </div>

                    </div>

                    <table id="behaviorTable" class="table table-striped table-bordered">

                        <caption></caption>

                        <thead>
                            <tr>
                                <th scope="col" style="width: 3em">{{ dataTable.headerRow[0] }}</th>
                                <th scope="col">{{ dataTable.headerRow[1] }}</th>
                                <th scope="col" style="width: 3em">{{ dataTable.headerRow[2] }}</th>
                                <th scope="col">{{ dataTable.headerRow[3] }}</th>
                                <th scope="col" style="width: 5em">{{ dataTable.headerRow[4] }}</th>
                            </tr>
                        </thead>

                        <tfoot>
                            <tr>
                                <th scope="col">{{ dataTable.footerRow[0] }}</th>
                                <th scope="col">{{ dataTable.footerRow[1] }}</th>
                                <th scope="col">{{ dataTable.footerRow[2] }}</th>
                                <th scope="col">{{ dataTable.footerRow[3] }}</th>
                                <th scope="col">{{ dataTable.footerRow[4] }}</th>
                            </tr>
                        </tfoot>

                        <tbody>
                            <tr *ngFor="let row of dataTable.dataRows">
                                <td>{{ row[0] }}</td>
                                <td>{{ row[1] }}</td>
                                <td>{{ row[2] }}</td>
                                <td>{{ row[3] }}</td>
                                <td>{{ row[4] }}</td>
                            </tr>
                        </tbody>
                        
                    </table>

                </div>

            </div>
            <!-- end content-->

        </div>

    </div>

</div>